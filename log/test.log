  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "books"[0m
  [1m[35m (31.4ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "code" varchar, "title" varchar, "author" varchar, "stock" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "borrow_books"[0m
  [1m[35m (18.1ms)[0m  [1m[35mCREATE TABLE "borrow_books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "book_id" integer, "member_id" integer, "deadline_book" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "members"[0m
  [1m[35m (18.5ms)[0m  [1m[35mCREATE TABLE "members" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "code" varchar, "name" varchar, "book_borrowed_count" integer, "is_penalized" boolean, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "penalty_until_date" datetime(6))[0m
  [1m[35m (16.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (14.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20240810080206)[0m
  [1m[35m (15.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20240810033558),
(20240810034755),
(20240810035003);

[0m
  [1m[35m (17.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2024-08-10 10:14:38.947897"], ["updated_at", "2024-08-10 10:14:38.947897"]]
  [1m[36mTRANSACTION (12.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "schema_sha1"], ["value", "e2f91dfb03cfcd6f782a317436c73d667bd953c4"], ["created_at", "2024-08-10 10:14:38.968006"], ["updated_at", "2024-08-10 10:14:38.968006"]]
  [1m[36mTRANSACTION (13.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:14:39.055869', '2024-08-10 10:14:39.055869');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:14:39.055869', '2024-08-10 10:14:39.055869');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:14:39.069661', '2024-08-10 10:14:39.069661');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:14:39.069661', '2024-08-10 10:14:39.069661');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:14:39.070409', '2024-08-10 10:14:39.070409');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:14:39.070409', '2024-08-10 10:14:39.070409')[0m
  [1m[36mTRANSACTION (16.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------
BookTest: test_the_truth
------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:14:46.909472', '2024-08-10 10:14:46.909472');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:14:46.909472', '2024-08-10 10:14:46.909472');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:14:46.910506', '2024-08-10 10:14:46.910506');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:14:46.910506', '2024-08-10 10:14:46.910506');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:14:46.911149', '2024-08-10 10:14:46.911149');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:14:46.911149', '2024-08-10 10:14:46.911149')[0m
  [1m[36mTRANSACTION (15.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------
BookTest: test_the_truth
------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:15:24.159403', '2024-08-10 10:15:24.159403');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:15:24.159403', '2024-08-10 10:15:24.159403');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:15:24.160458', '2024-08-10 10:15:24.160458');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:15:24.160458', '2024-08-10 10:15:24.160458');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:15:24.161149', '2024-08-10 10:15:24.161149');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:15:24.161149', '2024-08-10 10:15:24.161149')[0m
  [1m[36mTRANSACTION (25.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------
BookTest: test_the_truth
------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:16:08.451655', '2024-08-10 10:16:08.451655');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:16:08.451655', '2024-08-10 10:16:08.451655');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:16:08.453047', '2024-08-10 10:16:08.453047');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:16:08.453047', '2024-08-10 10:16:08.453047');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:16:08.453822', '2024-08-10 10:16:08.453822');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:16:08.453822', '2024-08-10 10:16:08.453822')[0m
  [1m[36mTRANSACTION (21.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------
BookTest: test_the_truth
------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? LIMIT ?[0m  [["code", "A"], ["LIMIT", 1]]
  [1m[36mBook Create (0.2ms)[0m  [1m[32mINSERT INTO "books" ("code", "title", "author", "stock", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "A"], ["title", "this is title"], ["author", "algi"], ["stock", 1], ["created_at", "2024-08-10 10:16:08.484522"], ["updated_at", "2024-08-10 10:16:08.484522"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:23:47.913111', '2024-08-10 10:23:47.913111');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:23:47.913111', '2024-08-10 10:23:47.913111');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:23:47.914233', '2024-08-10 10:23:47.914233');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:23:47.914233', '2024-08-10 10:23:47.914233');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:23:47.914923', '2024-08-10 10:23:47.914923');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:23:47.914923', '2024-08-10 10:23:47.914923')[0m
  [1m[36mTRANSACTION (21.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
BookTest: test_Cannot_create_book_if_code_blank
-----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? LIMIT ?[0m  [["code", "A"], ["LIMIT", 1]]
  [1m[36mBook Create (0.5ms)[0m  [1m[32mINSERT INTO "books" ("code", "title", "author", "stock", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "A"], ["title", "this is title"], ["author", "algi"], ["stock", 1], ["created_at", "2024-08-10 10:23:47.966340"], ["updated_at", "2024-08-10 10:23:47.966340"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:23:49.006456', '2024-08-10 10:23:49.006456');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:23:49.006456', '2024-08-10 10:23:49.006456');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:23:49.007529', '2024-08-10 10:23:49.007529');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:23:49.007529', '2024-08-10 10:23:49.007529');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:23:49.008189', '2024-08-10 10:23:49.008189');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:23:49.008189', '2024-08-10 10:23:49.008189')[0m
  [1m[36mTRANSACTION (16.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
BookTest: test_Create_Book_with_complete_request
------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? LIMIT ?[0m  [["code", "A"], ["LIMIT", 1]]
  [1m[36mBook Create (0.2ms)[0m  [1m[32mINSERT INTO "books" ("code", "title", "author", "stock", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "A"], ["title", "this is title"], ["author", "algi"], ["stock", 1], ["created_at", "2024-08-10 10:23:49.045576"], ["updated_at", "2024-08-10 10:23:49.045576"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:24:03.327989', '2024-08-10 10:24:03.327989');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:24:03.327989', '2024-08-10 10:24:03.327989');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:24:03.329035', '2024-08-10 10:24:03.329035');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:24:03.329035', '2024-08-10 10:24:03.329035');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:24:03.329690', '2024-08-10 10:24:03.329690');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:24:03.329690', '2024-08-10 10:24:03.329690')[0m
  [1m[36mTRANSACTION (16.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
BookTest: test_Cannot_create_book_if_code_blank
-----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:24:04.309515', '2024-08-10 10:24:04.309515');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:24:04.309515', '2024-08-10 10:24:04.309515');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:24:04.311115', '2024-08-10 10:24:04.311115');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:24:04.311115', '2024-08-10 10:24:04.311115');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:24:04.311781', '2024-08-10 10:24:04.311781');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:24:04.311781', '2024-08-10 10:24:04.311781')[0m
  [1m[36mTRANSACTION (26.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
BookTest: test_Create_Book_with_complete_request
------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? LIMIT ?[0m  [["code", "A"], ["LIMIT", 1]]
  [1m[36mBook Create (0.6ms)[0m  [1m[32mINSERT INTO "books" ("code", "title", "author", "stock", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "A"], ["title", "this is title"], ["author", "algi"], ["stock", 1], ["created_at", "2024-08-10 10:24:04.372549"], ["updated_at", "2024-08-10 10:24:04.372549"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:25:26.042571', '2024-08-10 10:25:26.042571');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:25:26.042571', '2024-08-10 10:25:26.042571');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:25:26.043770', '2024-08-10 10:25:26.043770');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:25:26.043770', '2024-08-10 10:25:26.043770');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:25:26.044448', '2024-08-10 10:25:26.044448');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:25:26.044448', '2024-08-10 10:25:26.044448')[0m
  [1m[36mTRANSACTION (16.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
BookTest: test_Cannot_create_book_if_stock_blank
------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? LIMIT ?[0m  [["code", "A"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:25:27.037440', '2024-08-10 10:25:27.037440');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:25:27.037440', '2024-08-10 10:25:27.037440');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:25:27.038508', '2024-08-10 10:25:27.038508');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:25:27.038508', '2024-08-10 10:25:27.038508');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:25:27.039158', '2024-08-10 10:25:27.039158');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:25:27.039158', '2024-08-10 10:25:27.039158')[0m
  [1m[36mTRANSACTION (22.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
BookTest: test_Cannot_create_book_if_author_blank
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? LIMIT ?[0m  [["code", "A"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:25:28.047120', '2024-08-10 10:25:28.047120');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:25:28.047120', '2024-08-10 10:25:28.047120');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:25:28.048238', '2024-08-10 10:25:28.048238');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:25:28.048238', '2024-08-10 10:25:28.048238');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:25:28.049182', '2024-08-10 10:25:28.049182');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:25:28.049182', '2024-08-10 10:25:28.049182')[0m
  [1m[36mTRANSACTION (22.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
BookTest: test_Cannot_create_book_if_title_blank
------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? LIMIT ?[0m  [["code", "A"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:25:29.028168', '2024-08-10 10:25:29.028168');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:25:29.028168', '2024-08-10 10:25:29.028168');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:25:29.029333', '2024-08-10 10:25:29.029333');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:25:29.029333', '2024-08-10 10:25:29.029333');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:25:29.029986', '2024-08-10 10:25:29.029986');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:25:29.029986', '2024-08-10 10:25:29.029986')[0m
  [1m[36mTRANSACTION (10.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
BookTest: test_Cannot_create_book_if_code_blank
-----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:25:29.984402', '2024-08-10 10:25:29.984402');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:25:29.984402', '2024-08-10 10:25:29.984402');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:25:29.985473', '2024-08-10 10:25:29.985473');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:25:29.985473', '2024-08-10 10:25:29.985473');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:25:29.986115', '2024-08-10 10:25:29.986115');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:25:29.986115', '2024-08-10 10:25:29.986115')[0m
  [1m[36mTRANSACTION (16.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
BookTest: test_Create_Book_with_complete_request
------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? LIMIT ?[0m  [["code", "A"], ["LIMIT", 1]]
  [1m[36mBook Create (0.2ms)[0m  [1m[32mINSERT INTO "books" ("code", "title", "author", "stock", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "A"], ["title", "this is title"], ["author", "algi"], ["stock", 1], ["created_at", "2024-08-10 10:25:30.011421"], ["updated_at", "2024-08-10 10:25:30.011421"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:29:30.752361', '2024-08-10 10:29:30.752361');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:29:30.752361', '2024-08-10 10:29:30.752361');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:29:30.753430', '2024-08-10 10:29:30.753430');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:29:30.753430', '2024-08-10 10:29:30.753430');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:29:30.754085', '2024-08-10 10:29:30.754085');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:29:30.754085', '2024-08-10 10:29:30.754085')[0m
  [1m[36mTRANSACTION (25.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
MemberTest: test_cannot_create_member_with_blank_name
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMember Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? LIMIT ?[0m  [["code", "A"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:29:31.797606', '2024-08-10 10:29:31.797606');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:29:31.797606', '2024-08-10 10:29:31.797606');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:29:31.798718', '2024-08-10 10:29:31.798718');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:29:31.798718', '2024-08-10 10:29:31.798718');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:29:31.799529', '2024-08-10 10:29:31.799529');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:29:31.799529', '2024-08-10 10:29:31.799529')[0m
  [1m[36mTRANSACTION (26.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
MemberTest: test_cannot_create_member_with_blank_code
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:29:32.807628', '2024-08-10 10:29:32.807628');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:29:32.807628', '2024-08-10 10:29:32.807628');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:29:32.808876', '2024-08-10 10:29:32.808876');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:29:32.808876', '2024-08-10 10:29:32.808876');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:29:32.809819', '2024-08-10 10:29:32.809819');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:29:32.809819', '2024-08-10 10:29:32.809819')[0m
  [1m[36mTRANSACTION (30.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
MemberTest: test_can_create_member_with_complete_request
--------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMember Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? LIMIT ?[0m  [["code", "A"], ["LIMIT", 1]]
  [1m[36mMember Create (0.3ms)[0m  [1m[32mINSERT INTO "members" ("code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at", "penalty_until_date") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["code", "A"], ["name", "algi"], ["book_borrowed_count", 0], ["is_penalized", 0], ["created_at", "2024-08-10 10:29:32.864805"], ["updated_at", "2024-08-10 10:29:32.864805"], ["penalty_until_date", nil]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:29:38.003826', '2024-08-10 10:29:38.003826');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:29:38.003826', '2024-08-10 10:29:38.003826');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:29:38.005037', '2024-08-10 10:29:38.005037');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:29:38.005037', '2024-08-10 10:29:38.005037');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:29:38.005695', '2024-08-10 10:29:38.005695');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:29:38.005695', '2024-08-10 10:29:38.005695')[0m
  [1m[36mTRANSACTION (11.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
MemberTest: test_cannot_create_member_with_blank_code
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:31:58.089246', '2024-08-10 10:31:58.089246');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:31:58.089246', '2024-08-10 10:31:58.089246');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:31:58.090348', '2024-08-10 10:31:58.090348');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:31:58.090348', '2024-08-10 10:31:58.090348');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:31:58.091020', '2024-08-10 10:31:58.091020');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:31:58.091020', '2024-08-10 10:31:58.091020')[0m
  [1m[36mTRANSACTION (19.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
MemberTest: test_cannot_create_member_with_blank_name
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? LIMIT ?[0m  [["code", "A"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:31:59.079931', '2024-08-10 10:31:59.079931');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:31:59.079931', '2024-08-10 10:31:59.079931');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:31:59.081035', '2024-08-10 10:31:59.081035');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:31:59.081035', '2024-08-10 10:31:59.081035');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:31:59.081683', '2024-08-10 10:31:59.081683');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:31:59.081683', '2024-08-10 10:31:59.081683')[0m
  [1m[36mTRANSACTION (24.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
MemberTest: test_cannot_create_member_with_blank_code
-----------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMember Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:32:00.091744', '2024-08-10 10:32:00.091744');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:32:00.091744', '2024-08-10 10:32:00.091744');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:32:00.092898', '2024-08-10 10:32:00.092898');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:32:00.092898', '2024-08-10 10:32:00.092898');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:32:00.093581', '2024-08-10 10:32:00.093581');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:32:00.093581', '2024-08-10 10:32:00.093581')[0m
  [1m[36mTRANSACTION (26.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
MemberTest: test_can_create_member_with_blank_penalty_until_date
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? LIMIT ?[0m  [["code", "A"], ["LIMIT", 1]]
  [1m[36mMember Create (0.2ms)[0m  [1m[32mINSERT INTO "members" ("code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at", "penalty_until_date") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["code", "A"], ["name", "algi"], ["book_borrowed_count", 0], ["is_penalized", 0], ["created_at", "2024-08-10 10:32:00.129811"], ["updated_at", "2024-08-10 10:32:00.129811"], ["penalty_until_date", nil]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:32:01.078456', '2024-08-10 10:32:01.078456');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:32:01.078456', '2024-08-10 10:32:01.078456');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:32:01.079512', '2024-08-10 10:32:01.079512');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:32:01.079512', '2024-08-10 10:32:01.079512');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:32:01.080182', '2024-08-10 10:32:01.080182');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:32:01.080182', '2024-08-10 10:32:01.080182')[0m
  [1m[36mTRANSACTION (29.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
MemberTest: test_can_create_member_with_blank_is_penalized
----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? LIMIT ?[0m  [["code", "A"], ["LIMIT", 1]]
  [1m[36mMember Create (0.1ms)[0m  [1m[32mINSERT INTO "members" ("code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at", "penalty_until_date") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["code", "A"], ["name", "algi"], ["book_borrowed_count", 0], ["is_penalized", 0], ["created_at", "2024-08-10 10:32:01.118611"], ["updated_at", "2024-08-10 10:32:01.118611"], ["penalty_until_date", nil]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:32:02.141628', '2024-08-10 10:32:02.141628');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:32:02.141628', '2024-08-10 10:32:02.141628');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:32:02.142691', '2024-08-10 10:32:02.142691');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:32:02.142691', '2024-08-10 10:32:02.142691');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:32:02.143353', '2024-08-10 10:32:02.143353');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:32:02.143353', '2024-08-10 10:32:02.143353')[0m
  [1m[36mTRANSACTION (23.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------
MemberTest: test_can_create_member_with_blank_book_borrowed_count
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMember Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? LIMIT ?[0m  [["code", "A"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:32:03.282271', '2024-08-10 10:32:03.282271');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:32:03.282271', '2024-08-10 10:32:03.282271');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:32:03.283848', '2024-08-10 10:32:03.283848');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:32:03.283848', '2024-08-10 10:32:03.283848');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:32:03.285084', '2024-08-10 10:32:03.285084');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:32:03.285084', '2024-08-10 10:32:03.285084')[0m
  [1m[36mTRANSACTION (14.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
MemberTest: test_can_create_member_with_complete_request
--------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? LIMIT ?[0m  [["code", "A"], ["LIMIT", 1]]
  [1m[36mMember Create (0.2ms)[0m  [1m[32mINSERT INTO "members" ("code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at", "penalty_until_date") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["code", "A"], ["name", "algi"], ["book_borrowed_count", 0], ["is_penalized", 0], ["created_at", "2024-08-10 10:32:03.310606"], ["updated_at", "2024-08-10 10:32:03.310606"], ["penalty_until_date", "2024-08-10 10:32:03.304009"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:32:21.477709', '2024-08-10 10:32:21.477709');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:32:21.477709', '2024-08-10 10:32:21.477709');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:32:21.479459', '2024-08-10 10:32:21.479459');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:32:21.479459', '2024-08-10 10:32:21.479459');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:32:21.480611', '2024-08-10 10:32:21.480611');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:32:21.480611', '2024-08-10 10:32:21.480611')[0m
  [1m[36mTRANSACTION (10.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------
MemberTest: test_can_create_member_with_blank_book_borrowed_count
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? LIMIT ?[0m  [["code", "A"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:32:54.422405', '2024-08-10 10:32:54.422405');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:32:54.422405', '2024-08-10 10:32:54.422405');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:32:54.423451', '2024-08-10 10:32:54.423451');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:32:54.423451', '2024-08-10 10:32:54.423451');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:32:54.424106', '2024-08-10 10:32:54.424106');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:32:54.424106', '2024-08-10 10:32:54.424106')[0m
  [1m[36mTRANSACTION (28.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
MemberTest: test_cannot_create_member_with_blank_name
-----------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMember Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? LIMIT ?[0m  [["code", "A"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:32:55.530549', '2024-08-10 10:32:55.530549');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:32:55.530549', '2024-08-10 10:32:55.530549');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:32:55.531597', '2024-08-10 10:32:55.531597');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:32:55.531597', '2024-08-10 10:32:55.531597');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:32:55.532246', '2024-08-10 10:32:55.532246');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:32:55.532246', '2024-08-10 10:32:55.532246')[0m
  [1m[36mTRANSACTION (19.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
MemberTest: test_cannot_create_member_with_blank_code
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:32:56.541927', '2024-08-10 10:32:56.541927');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:32:56.541927', '2024-08-10 10:32:56.541927');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:32:56.543019', '2024-08-10 10:32:56.543019');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:32:56.543019', '2024-08-10 10:32:56.543019');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:32:56.543668', '2024-08-10 10:32:56.543668');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:32:56.543668', '2024-08-10 10:32:56.543668')[0m
  [1m[36mTRANSACTION (27.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
MemberTest: test_can_create_member_with_blank_penalty_until_date
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? LIMIT ?[0m  [["code", "A"], ["LIMIT", 1]]
  [1m[36mMember Create (0.2ms)[0m  [1m[32mINSERT INTO "members" ("code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at", "penalty_until_date") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["code", "A"], ["name", "algi"], ["book_borrowed_count", 0], ["is_penalized", 0], ["created_at", "2024-08-10 10:32:56.580433"], ["updated_at", "2024-08-10 10:32:56.580433"], ["penalty_until_date", nil]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:32:57.621359', '2024-08-10 10:32:57.621359');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:32:57.621359', '2024-08-10 10:32:57.621359');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:32:57.622501', '2024-08-10 10:32:57.622501');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:32:57.622501', '2024-08-10 10:32:57.622501');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:32:57.623166', '2024-08-10 10:32:57.623166');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:32:57.623166', '2024-08-10 10:32:57.623166')[0m
  [1m[36mTRANSACTION (25.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------
MemberTest: test_can_create_member_with_blank_is_penalized
----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? LIMIT ?[0m  [["code", "A"], ["LIMIT", 1]]
  [1m[36mMember Create (0.4ms)[0m  [1m[32mINSERT INTO "members" ("code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at", "penalty_until_date") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["code", "A"], ["name", "algi"], ["book_borrowed_count", 0], ["is_penalized", 0], ["created_at", "2024-08-10 10:32:57.659941"], ["updated_at", "2024-08-10 10:32:57.659941"], ["penalty_until_date", nil]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:32:58.663762', '2024-08-10 10:32:58.663762');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:32:58.663762', '2024-08-10 10:32:58.663762');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:32:58.664904', '2024-08-10 10:32:58.664904');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:32:58.664904', '2024-08-10 10:32:58.664904');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:32:58.665607', '2024-08-10 10:32:58.665607');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:32:58.665607', '2024-08-10 10:32:58.665607')[0m
  [1m[36mTRANSACTION (29.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
MemberTest: test_cannot_create_member_with_blank_book_borrowed_count
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? LIMIT ?[0m  [["code", "A"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:32:59.684216', '2024-08-10 10:32:59.684216');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:32:59.684216', '2024-08-10 10:32:59.684216');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:32:59.685376', '2024-08-10 10:32:59.685376');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:32:59.685376', '2024-08-10 10:32:59.685376');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:32:59.686099', '2024-08-10 10:32:59.686099');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:32:59.686099', '2024-08-10 10:32:59.686099')[0m
  [1m[36mTRANSACTION (35.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
MemberTest: test_can_create_member_with_complete_request
--------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? LIMIT ?[0m  [["code", "A"], ["LIMIT", 1]]
  [1m[36mMember Create (0.2ms)[0m  [1m[32mINSERT INTO "members" ("code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at", "penalty_until_date") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["code", "A"], ["name", "algi"], ["book_borrowed_count", 0], ["is_penalized", 0], ["created_at", "2024-08-10 10:32:59.732381"], ["updated_at", "2024-08-10 10:32:59.732381"], ["penalty_until_date", "2024-08-10 10:32:59.724484"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:33:02.368342', '2024-08-10 10:33:02.368342');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:33:02.368342', '2024-08-10 10:33:02.368342');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:33:02.369439', '2024-08-10 10:33:02.369439');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:33:02.369439', '2024-08-10 10:33:02.369439');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:33:02.370102', '2024-08-10 10:33:02.370102');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:33:02.370102', '2024-08-10 10:33:02.370102')[0m
  [1m[36mTRANSACTION (23.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------
MemberTest: test_can_create_member_with_complete_request
--------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? LIMIT ?[0m  [["code", "A"], ["LIMIT", 1]]
  [1m[36mMember Create (0.3ms)[0m  [1m[32mINSERT INTO "members" ("code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at", "penalty_until_date") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["code", "A"], ["name", "algi"], ["book_borrowed_count", 0], ["is_penalized", 0], ["created_at", "2024-08-10 10:33:02.403817"], ["updated_at", "2024-08-10 10:33:02.403817"], ["penalty_until_date", "2024-08-10 10:33:02.397154"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:39:46.491714', '2024-08-10 10:39:46.491714');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:39:46.491714', '2024-08-10 10:39:46.491714');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:39:46.493000', '2024-08-10 10:39:46.493000');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:39:46.493000', '2024-08-10 10:39:46.493000');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:39:46.493769', '2024-08-10 10:39:46.493769');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:39:46.493769', '2024-08-10 10:39:46.493769')[0m
  [1m[36mTRANSACTION (13.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
BorrowBookTest: test_should_not_borrow_book_if_member_is_penalized
------------------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.1ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? AND "members"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:39:47.572650', '2024-08-10 10:39:47.572650');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:39:47.572650', '2024-08-10 10:39:47.572650');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:39:47.573813', '2024-08-10 10:39:47.573813');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:39:47.573813', '2024-08-10 10:39:47.573813');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:39:47.574521', '2024-08-10 10:39:47.574521');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:39:47.574521', '2024-08-10 10:39:47.574521')[0m
  [1m[36mTRANSACTION (16.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
BorrowBookTest: test_should_not_borrow_book_if_stock_is_0
---------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.1ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? AND "books"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:39:48.588104', '2024-08-10 10:39:48.588104');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:39:48.588104', '2024-08-10 10:39:48.588104');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:39:48.589165', '2024-08-10 10:39:48.589165');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:39:48.589165', '2024-08-10 10:39:48.589165');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:39:48.589817', '2024-08-10 10:39:48.589817');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:39:48.589817', '2024-08-10 10:39:48.589817')[0m
  [1m[36mTRANSACTION (23.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
BorrowBookTest: test_should_update_book_stock_after_returning
-------------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.1ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowBook Create (0.2ms)[0m  [1m[32mINSERT INTO "borrow_books" ("book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["book_id", 980190962], ["member_id", 980190962], ["deadline_book", "2024-08-17 10:39:48.644676"], ["created_at", "2024-08-10 10:39:48.644592"], ["updated_at", "2024-08-10 10:39:48.644592"]]
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? AND "books"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? AND "members"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowBook Destroy (0.1ms)[0m  [1m[31mDELETE FROM "borrow_books" WHERE "borrow_books"."id" = ?[0m  [["id", 980190963]]
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? AND "books"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? AND "members"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:39:49.648860', '2024-08-10 10:39:49.648860');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:39:49.648860', '2024-08-10 10:39:49.648860');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:39:49.649887', '2024-08-10 10:39:49.649887');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:39:49.649887', '2024-08-10 10:39:49.649887');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:39:49.650571', '2024-08-10 10:39:49.650571');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:39:49.650571', '2024-08-10 10:39:49.650571')[0m
  [1m[36mTRANSACTION (27.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
BorrowBookTest: test_should_update_book_stock_after_borrowing
-------------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.1ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowBook Create (0.2ms)[0m  [1m[32mINSERT INTO "borrow_books" ("book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["book_id", 980190962], ["member_id", 980190962], ["deadline_book", "2024-08-17 10:39:49.695832"], ["created_at", "2024-08-10 10:39:49.695766"], ["updated_at", "2024-08-10 10:39:49.695766"]]
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? AND "books"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? AND "members"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:39:50.681686', '2024-08-10 10:39:50.681686');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:39:50.681686', '2024-08-10 10:39:50.681686');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:39:50.682751', '2024-08-10 10:39:50.682751');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:39:50.682751', '2024-08-10 10:39:50.682751');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:39:50.683414', '2024-08-10 10:39:50.683414');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:39:50.683414', '2024-08-10 10:39:50.683414')[0m
  [1m[36mTRANSACTION (25.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
BorrowBookTest: test_should_set_deadline_book_to_7_days_from_now
----------------------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.1ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowBook Create (0.2ms)[0m  [1m[32mINSERT INTO "borrow_books" ("book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["book_id", 980190962], ["member_id", 980190962], ["deadline_book", "2024-08-17 10:39:50.739687"], ["created_at", "2024-08-10 10:39:50.739615"], ["updated_at", "2024-08-10 10:39:50.739615"]]
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? AND "books"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? AND "members"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:39:51.763692', '2024-08-10 10:39:51.763692');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:39:51.763692', '2024-08-10 10:39:51.763692');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:39:51.765393', '2024-08-10 10:39:51.765393');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:39:51.765393', '2024-08-10 10:39:51.765393');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:39:51.766264', '2024-08-10 10:39:51.766264');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:39:51.766264', '2024-08-10 10:39:51.766264')[0m
  [1m[36mTRANSACTION (30.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
BorrowBookTest: test_should_save_borrow_book_with_valid_book_and_member
-----------------------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.1ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowBook Create (0.2ms)[0m  [1m[32mINSERT INTO "borrow_books" ("book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["book_id", 980190962], ["member_id", 980190962], ["deadline_book", "2024-08-17 10:39:51.832178"], ["created_at", "2024-08-10 10:39:51.832109"], ["updated_at", "2024-08-10 10:39:51.832109"]]
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? AND "books"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? AND "members"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:39:52.856288', '2024-08-10 10:39:52.856288');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:39:52.856288', '2024-08-10 10:39:52.856288');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:39:52.857313', '2024-08-10 10:39:52.857313');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:39:52.857313', '2024-08-10 10:39:52.857313');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:39:52.857951', '2024-08-10 10:39:52.857951');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:39:52.857951', '2024-08-10 10:39:52.857951')[0m
  [1m[36mTRANSACTION (28.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
BorrowBookTest: test_should_not_save_borrow_book_without_a_book_and_member
--------------------------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.1ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:40:43.791792', '2024-08-10 10:40:43.791792');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:40:43.791792', '2024-08-10 10:40:43.791792');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:40:43.792922', '2024-08-10 10:40:43.792922');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:40:43.792922', '2024-08-10 10:40:43.792922');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:40:43.793595', '2024-08-10 10:40:43.793595');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:40:43.793595', '2024-08-10 10:40:43.793595')[0m
  [1m[36mTRANSACTION (22.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
BorrowBookTest: test_should_not_save_borrow_book_without_a_book_and_member
--------------------------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.1ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:40:54.024360', '2024-08-10 10:40:54.024360');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:40:54.024360', '2024-08-10 10:40:54.024360');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:40:54.025431', '2024-08-10 10:40:54.025431');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:40:54.025431', '2024-08-10 10:40:54.025431');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:40:54.026088', '2024-08-10 10:40:54.026088');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:40:54.026088', '2024-08-10 10:40:54.026088')[0m
  [1m[36mTRANSACTION (23.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
BorrowBookTest: test_should_not_save_borrow_book_without_a_book_and_member
--------------------------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.1ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:44:53.850369', '2024-08-10 10:44:53.850369');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:44:53.850369', '2024-08-10 10:44:53.850369');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:44:53.851407', '2024-08-10 10:44:53.851407');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:44:53.851407', '2024-08-10 10:44:53.851407');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:44:53.852060', '2024-08-10 10:44:53.852060');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:44:53.852060', '2024-08-10 10:44:53.852060')[0m
  [1m[36mTRANSACTION (21.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
BorrowBookTest: test_should_not_borrow_book_if_member_is_penalized
------------------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.1ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? AND "members"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:44:54.846898', '2024-08-10 10:44:54.846898');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:44:54.846898', '2024-08-10 10:44:54.846898');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:44:54.847942', '2024-08-10 10:44:54.847942');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:44:54.847942', '2024-08-10 10:44:54.847942');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:44:54.848595', '2024-08-10 10:44:54.848595');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:44:54.848595', '2024-08-10 10:44:54.848595')[0m
  [1m[36mTRANSACTION (26.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
BorrowBookTest: test_should_not_borrow_book_if_stock_is_0
---------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.1ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? AND "books"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:44:55.868944', '2024-08-10 10:44:55.868944');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:44:55.868944', '2024-08-10 10:44:55.868944');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:44:55.870094', '2024-08-10 10:44:55.870094');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:44:55.870094', '2024-08-10 10:44:55.870094');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:44:55.870821', '2024-08-10 10:44:55.870821');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:44:55.870821', '2024-08-10 10:44:55.870821')[0m
  [1m[36mTRANSACTION (27.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
BorrowBookTest: test_should_update_book_stock_after_returning
-------------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.1ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowBook Create (0.2ms)[0m  [1m[32mINSERT INTO "borrow_books" ("book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["book_id", 980190962], ["member_id", 980190962], ["deadline_book", "2024-08-17 10:44:55.930351"], ["created_at", "2024-08-10 10:44:55.930292"], ["updated_at", "2024-08-10 10:44:55.930292"]]
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? AND "books"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? AND "members"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowBook Destroy (0.0ms)[0m  [1m[31mDELETE FROM "borrow_books" WHERE "borrow_books"."id" = ?[0m  [["id", 980190963]]
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? AND "books"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? AND "members"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:44:56.894962', '2024-08-10 10:44:56.894962');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:44:56.894962', '2024-08-10 10:44:56.894962');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:44:56.896166', '2024-08-10 10:44:56.896166');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:44:56.896166', '2024-08-10 10:44:56.896166');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:44:56.897132', '2024-08-10 10:44:56.897132');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:44:56.897132', '2024-08-10 10:44:56.897132')[0m
  [1m[36mTRANSACTION (25.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
BorrowBookTest: test_should_update_book_stock_after_borrowing
-------------------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.2ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowBook Create (0.2ms)[0m  [1m[32mINSERT INTO "borrow_books" ("book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["book_id", 980190962], ["member_id", 980190962], ["deadline_book", "2024-08-17 10:44:56.978264"], ["created_at", "2024-08-10 10:44:56.978199"], ["updated_at", "2024-08-10 10:44:56.978199"]]
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? AND "books"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? AND "members"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:44:57.938675', '2024-08-10 10:44:57.938675');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:44:57.938675', '2024-08-10 10:44:57.938675');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:44:57.939719', '2024-08-10 10:44:57.939719');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:44:57.939719', '2024-08-10 10:44:57.939719');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:44:57.940365', '2024-08-10 10:44:57.940365');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:44:57.940365', '2024-08-10 10:44:57.940365')[0m
  [1m[36mTRANSACTION (30.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
BorrowBookTest: test_should_set_deadline_book_to_7_days_from_now
----------------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.1ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowBook Create (0.2ms)[0m  [1m[32mINSERT INTO "borrow_books" ("book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["book_id", 980190962], ["member_id", 980190962], ["deadline_book", "2024-08-17 10:44:58.001868"], ["created_at", "2024-08-10 10:44:58.001808"], ["updated_at", "2024-08-10 10:44:58.001808"]]
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? AND "books"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? AND "members"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:44:58.961509', '2024-08-10 10:44:58.961509');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:44:58.961509', '2024-08-10 10:44:58.961509');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:44:58.962624', '2024-08-10 10:44:58.962624');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:44:58.962624', '2024-08-10 10:44:58.962624');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:44:58.963335', '2024-08-10 10:44:58.963335');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:44:58.963335', '2024-08-10 10:44:58.963335')[0m
  [1m[36mTRANSACTION (26.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
BorrowBookTest: test_should_save_borrow_book_with_valid_book_and_member
-----------------------------------------------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.3ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowBook Create (0.2ms)[0m  [1m[32mINSERT INTO "borrow_books" ("book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["book_id", 980190962], ["member_id", 980190962], ["deadline_book", "2024-08-17 10:44:59.055956"], ["created_at", "2024-08-10 10:44:59.055384"], ["updated_at", "2024-08-10 10:44:59.055384"]]
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? AND "books"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? AND "members"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:44:59.989065', '2024-08-10 10:44:59.989065');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:44:59.989065', '2024-08-10 10:44:59.989065');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:44:59.990145', '2024-08-10 10:44:59.990145');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:44:59.990145', '2024-08-10 10:44:59.990145');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:44:59.990782', '2024-08-10 10:44:59.990782');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:44:59.990782', '2024-08-10 10:44:59.990782')[0m
  [1m[36mTRANSACTION (26.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
BorrowBookTest: test_should_not_save_borrow_book_without_a_book_and_member
--------------------------------------------------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.4ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:45:07.494883', '2024-08-10 10:45:07.494883');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:45:07.494883', '2024-08-10 10:45:07.494883');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:45:07.496048', '2024-08-10 10:45:07.496048');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:45:07.496048', '2024-08-10 10:45:07.496048');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:45:07.497162', '2024-08-10 10:45:07.497162');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:45:07.497162', '2024-08-10 10:45:07.497162')[0m
  [1m[36mTRANSACTION (20.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
BorrowBookTest: test_should_update_book_stock_after_returning
-------------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.1ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowBook Create (0.2ms)[0m  [1m[32mINSERT INTO "borrow_books" ("book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["book_id", 980190962], ["member_id", 980190962], ["deadline_book", "2024-08-17 10:45:07.552593"], ["created_at", "2024-08-10 10:45:07.552527"], ["updated_at", "2024-08-10 10:45:07.552527"]]
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? AND "books"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? AND "members"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowBook Destroy (0.1ms)[0m  [1m[31mDELETE FROM "borrow_books" WHERE "borrow_books"."id" = ?[0m  [["id", 980190963]]
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? AND "books"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? AND "members"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:45:10.060381', '2024-08-10 10:45:10.060381');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:45:10.060381', '2024-08-10 10:45:10.060381');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:45:10.061460', '2024-08-10 10:45:10.061460');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:45:10.061460', '2024-08-10 10:45:10.061460');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:45:10.062118', '2024-08-10 10:45:10.062118');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:45:10.062118', '2024-08-10 10:45:10.062118')[0m
  [1m[36mTRANSACTION (16.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
BorrowBookTest: test_should_not_save_borrow_book_without_a_book_and_member
--------------------------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.1ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:45:31.929783', '2024-08-10 10:45:31.929783');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:45:31.929783', '2024-08-10 10:45:31.929783');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:45:31.930824', '2024-08-10 10:45:31.930824');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:45:31.930824', '2024-08-10 10:45:31.930824');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:45:31.931477', '2024-08-10 10:45:31.931477');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:45:31.931477', '2024-08-10 10:45:31.931477')[0m
  [1m[36mTRANSACTION (25.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
BorrowBookTest: test_should_not_borrow_book_if_member_is_penalized
------------------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.1ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? AND "members"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:45:32.939867', '2024-08-10 10:45:32.939867');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:45:32.939867', '2024-08-10 10:45:32.939867');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:45:32.941217', '2024-08-10 10:45:32.941217');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:45:32.941217', '2024-08-10 10:45:32.941217');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:45:32.942024', '2024-08-10 10:45:32.942024');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:45:32.942024', '2024-08-10 10:45:32.942024')[0m
  [1m[36mTRANSACTION (23.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
BorrowBookTest: test_should_not_borrow_book_if_stock_is_0
---------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.1ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? AND "books"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:45:33.982439', '2024-08-10 10:45:33.982439');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:45:33.982439', '2024-08-10 10:45:33.982439');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:45:33.983542', '2024-08-10 10:45:33.983542');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:45:33.983542', '2024-08-10 10:45:33.983542');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:45:33.984203', '2024-08-10 10:45:33.984203');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:45:33.984203', '2024-08-10 10:45:33.984203')[0m
  [1m[36mTRANSACTION (25.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
BorrowBookTest: test_should_update_book_stock_after_returning
-------------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.1ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowBook Create (0.2ms)[0m  [1m[32mINSERT INTO "borrow_books" ("book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["book_id", 980190962], ["member_id", 980190962], ["deadline_book", "2024-08-17 10:45:34.043274"], ["created_at", "2024-08-10 10:45:34.042619"], ["updated_at", "2024-08-10 10:45:34.042619"]]
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? AND "books"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? AND "members"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowBook Destroy (0.1ms)[0m  [1m[31mDELETE FROM "borrow_books" WHERE "borrow_books"."id" = ?[0m  [["id", 980190963]]
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? AND "books"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? AND "members"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:45:35.169917', '2024-08-10 10:45:35.169917');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:45:35.169917', '2024-08-10 10:45:35.169917');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:45:35.172446', '2024-08-10 10:45:35.172446');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:45:35.172446', '2024-08-10 10:45:35.172446');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:45:35.173870', '2024-08-10 10:45:35.173870');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:45:35.173870', '2024-08-10 10:45:35.173870')[0m
  [1m[36mTRANSACTION (15.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
BorrowBookTest: test_should_update_book_stock_after_borrowing
-------------------------------------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.2ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowBook Create (0.4ms)[0m  [1m[32mINSERT INTO "borrow_books" ("book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["book_id", 980190962], ["member_id", 980190962], ["deadline_book", "2024-08-17 10:45:35.221383"], ["created_at", "2024-08-10 10:45:35.221323"], ["updated_at", "2024-08-10 10:45:35.221323"]]
  [1m[36mBook Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? AND "books"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? AND "members"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:45:36.333265', '2024-08-10 10:45:36.333265');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:45:36.333265', '2024-08-10 10:45:36.333265');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:45:36.334647', '2024-08-10 10:45:36.334647');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:45:36.334647', '2024-08-10 10:45:36.334647');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:45:36.335343', '2024-08-10 10:45:36.335343');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:45:36.335343', '2024-08-10 10:45:36.335343')[0m
  [1m[36mTRANSACTION (26.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
BorrowBookTest: test_should_set_deadline_book_to_7_days_from_now
----------------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.1ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowBook Create (0.2ms)[0m  [1m[32mINSERT INTO "borrow_books" ("book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["book_id", 980190962], ["member_id", 980190962], ["deadline_book", "2024-08-17 10:45:36.382959"], ["created_at", "2024-08-10 10:45:36.382905"], ["updated_at", "2024-08-10 10:45:36.382905"]]
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? AND "books"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? AND "members"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:45:37.431605', '2024-08-10 10:45:37.431605');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:45:37.431605', '2024-08-10 10:45:37.431605');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:45:37.432650', '2024-08-10 10:45:37.432650');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:45:37.432650', '2024-08-10 10:45:37.432650');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:45:37.433310', '2024-08-10 10:45:37.433310');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:45:37.433310', '2024-08-10 10:45:37.433310')[0m
  [1m[36mTRANSACTION (24.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
BorrowBookTest: test_should_save_borrow_book_with_valid_book_and_member
-----------------------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.1ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowBook Create (0.3ms)[0m  [1m[32mINSERT INTO "borrow_books" ("book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["book_id", 980190962], ["member_id", 980190962], ["deadline_book", "2024-08-17 10:45:37.492205"], ["created_at", "2024-08-10 10:45:37.492138"], ["updated_at", "2024-08-10 10:45:37.492138"]]
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? AND "books"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? AND "members"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.5ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:45:38.620964', '2024-08-10 10:45:38.620964');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:45:38.620964', '2024-08-10 10:45:38.620964');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:45:38.622004', '2024-08-10 10:45:38.622004');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:45:38.622004', '2024-08-10 10:45:38.622004');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:45:38.622662', '2024-08-10 10:45:38.622662');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:45:38.622662', '2024-08-10 10:45:38.622662')[0m
  [1m[36mTRANSACTION (26.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
BorrowBookTest: test_should_not_save_borrow_book_without_a_book_and_member
--------------------------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.2ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:46:56.394118', '2024-08-10 10:46:56.394118');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:46:56.394118', '2024-08-10 10:46:56.394118');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:46:56.395173', '2024-08-10 10:46:56.395173');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:46:56.395173', '2024-08-10 10:46:56.395173');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:46:56.395829', '2024-08-10 10:46:56.395829');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:46:56.395829', '2024-08-10 10:46:56.395829')[0m
  [1m[36mTRANSACTION (27.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------
BorrowBookTest: test_should_not_save_borrow_book_without_a_book_and_member
--------------------------------------------------------------------------
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.1ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:48:36.173733', '2024-08-10 10:48:36.173733');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:48:36.173733', '2024-08-10 10:48:36.173733');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:48:36.174811', '2024-08-10 10:48:36.174811');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:48:36.174811', '2024-08-10 10:48:36.174811');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:48:36.175524', '2024-08-10 10:48:36.175524');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:48:36.175524', '2024-08-10 10:48:36.175524')[0m
  [1m[36mTRANSACTION (20.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------
BorrowBookTest: test_should_not_borrow_book_if_member_is_penalized
------------------------------------------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.2ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? AND "members"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:48:37.205795', '2024-08-10 10:48:37.205795');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:48:37.205795', '2024-08-10 10:48:37.205795');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:48:37.206819', '2024-08-10 10:48:37.206819');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:48:37.206819', '2024-08-10 10:48:37.206819');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:48:37.207493', '2024-08-10 10:48:37.207493');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:48:37.207493', '2024-08-10 10:48:37.207493')[0m
  [1m[36mTRANSACTION (21.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
BorrowBookTest: test_should_not_borrow_book_if_stock_is_0
---------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.1ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? AND "books"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:48:38.259432', '2024-08-10 10:48:38.259432');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:48:38.259432', '2024-08-10 10:48:38.259432');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:48:38.261091', '2024-08-10 10:48:38.261091');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:48:38.261091', '2024-08-10 10:48:38.261091');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:48:38.262393', '2024-08-10 10:48:38.262393');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:48:38.262393', '2024-08-10 10:48:38.262393')[0m
  [1m[36mTRANSACTION (23.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
BorrowBookTest: test_should_update_book_stock_after_returning
-------------------------------------------------------------
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.3ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowBook Create (0.2ms)[0m  [1m[32mINSERT INTO "borrow_books" ("book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["book_id", 980190962], ["member_id", 980190962], ["deadline_book", "2024-08-17 10:48:38.346110"], ["created_at", "2024-08-10 10:48:38.346045"], ["updated_at", "2024-08-10 10:48:38.346045"]]
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? AND "books"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? AND "members"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowBook Destroy (0.1ms)[0m  [1m[31mDELETE FROM "borrow_books" WHERE "borrow_books"."id" = ?[0m  [["id", 980190963]]
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? AND "books"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? AND "members"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:48:39.369691', '2024-08-10 10:48:39.369691');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:48:39.369691', '2024-08-10 10:48:39.369691');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:48:39.370757', '2024-08-10 10:48:39.370757');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:48:39.370757', '2024-08-10 10:48:39.370757');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:48:39.371411', '2024-08-10 10:48:39.371411');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:48:39.371411', '2024-08-10 10:48:39.371411')[0m
  [1m[36mTRANSACTION (26.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------------------
BorrowBookTest: test_should_set_deadline_book_to_7_days_from_now
----------------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.1ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowBook Create (0.2ms)[0m  [1m[32mINSERT INTO "borrow_books" ("book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["book_id", 980190962], ["member_id", 980190962], ["deadline_book", "2024-08-17 10:48:39.431060"], ["created_at", "2024-08-10 10:48:39.430994"], ["updated_at", "2024-08-10 10:48:39.430994"]]
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? AND "books"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? AND "members"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "books";
DELETE FROM "borrow_books";
DELETE FROM "members";
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:48:40.402321', '2024-08-10 10:48:40.402321');
INSERT INTO "books" ("id", "code", "title", "author", "stock", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 1, '2024-08-10 10:48:40.402321', '2024-08-10 10:48:40.402321');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (980190962, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:48:40.403369', '2024-08-10 10:48:40.403369');
INSERT INTO "borrow_books" ("id", "book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (298486374, 1, 1, '2024-08-10 10:50:03', '2024-08-10 10:48:40.403369', '2024-08-10 10:48:40.403369');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 1, 0, '2024-08-10 10:48:40.404046', '2024-08-10 10:48:40.404046');
INSERT INTO "members" ("id", "code", "name", "book_borrowed_count", "is_penalized", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 1, 0, '2024-08-10 10:48:40.404046', '2024-08-10 10:48:40.404046')[0m
  [1m[36mTRANSACTION (26.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------
BorrowBookTest: test_should_save_borrow_book_with_valid_book_and_member
-----------------------------------------------------------------------
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Load (0.1ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE "members"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBorrowBook Create (0.2ms)[0m  [1m[32mINSERT INTO "borrow_books" ("book_id", "member_id", "deadline_book", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["book_id", 980190962], ["member_id", 980190962], ["deadline_book", "2024-08-17 10:48:40.462971"], ["created_at", "2024-08-10 10:48:40.462913"], ["updated_at", "2024-08-10 10:48:40.462913"]]
  [1m[36mBook Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "books" WHERE "books"."code" = ? AND "books"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mMember Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "members" WHERE "members"."code" = ? AND "members"."id" != ? LIMIT ?[0m  [["code", "MyString"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
